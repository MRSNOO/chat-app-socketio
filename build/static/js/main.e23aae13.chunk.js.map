{"version":3,"sources":["components/Chat/Chat.js","components/Join/Join.js","components/InfoBar/InfoBar.js","components/Input/Input.js","components/Message/Message.js","components/Messages/Messages.js","components/TextContainer/TextContainer.js","App.js","index.js","icons/onlineIcon.png","icons/closeIcon.png"],"names":["socket","Join","useState","name","setName","room","setRoom","className","placeholder","type","onChange","e","target","value","onClick","preventDefault","to","InfoBar","src","onlineIcon","alt","href","closeIcon","Input","message","setMessage","sendMessage","onKeyPress","key","Message","user","text","isSentByCurrentUser","trimmedName","trim","toLowerCase","Messages","messages","map","i","TextContainer","users","role","aria-label","Chat","location","setMessages","setUsers","ENDPOINT","useEffect","queryString","parse","search","console","log","io","emit","off","on","roomInfo","App","path","exact","component","ReactDOM","render","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.e23aae13.chunk.js","sourcesContent":["import React,{useState, useEffect} from 'react';\r\nimport queryString from \"query-string\" //get data from query in URL\r\nimport io from \"socket.io-client\"\r\n\r\nimport \"./Chat.css\"\r\nimport InfoBar from '../InfoBar/InfoBar';\r\nimport Input from '../Input/Input';\r\nimport Messages from '../Messages/Messages';\r\nimport TextContainer from '../TextContainer/TextContainer';\r\n\r\nlet socket;\r\n\r\nconst Chat = ({location}) => {\r\n  const [name, setName] = useState(\"\")\r\n  const [room, setRoom] = useState(\"\")\r\n  const [message, setMessage] = useState(\"\")\r\n  const [messages, setMessages] = useState([])\r\n  const [users, setUsers] = useState([])\r\n\r\n  const ENDPOINT = 'https://chat-app-socketio-test.herokuapp.com/'\r\n  useEffect(() => {\r\n    const {name, room} = queryString.parse(location.search) //location from router\r\n    console.log(location.search)\r\n    socket = io(ENDPOINT)\r\n\r\n    setName(name)\r\n    setRoom(room)\r\n    console.log(name, room)\r\n    console.log(socket)\r\n    \r\n    socket.emit('join', {name:name, room:room}, ()=>{}) //emit 1 event de server catch cai event do \r\n    \r\n    return () => {  //unmounting the component\r\n      socket.emit(\"disconnect\")\r\n      socket.off()\r\n    }\r\n\r\n  }, [ENDPOINT, location.search]);\r\n\r\n  useEffect(() => {// message là payload có {user, text}\r\n    socket.on(\"message\", (message) => {\r\n      setMessages([...messages, message])\r\n    })\r\n\r\n    socket.on(\"roomData\", (roomInfo) => {\r\n      setUsers(roomInfo.users)\r\n    })\r\n  }, []);\r\n\r\n  //function for sending messages\r\n  const sendMessage = (e) =>{\r\n    e.preventDefault()\r\n    if(message){\r\n      socket.emit(\"sendMessage\", message, () => setMessage(\"\")) // send xong thì lại rỗng \r\n    }\r\n  }\r\n\r\n  console.log(message, messages)\r\n\r\n  return (\r\n    <div className=\"outerContainer\">\r\n      <div className=\"container\">\r\n        {/* <input \r\n        value={message} \r\n        onChange={(e) => setMessage(e.target.value)}\r\n        onKeyPress={(e) => e.key === \"Enter\" ? sendMessage(e): null}\r\n        /> */}\r\n        <InfoBar room={room}/>\r\n        <Messages messages={messages} name={name} />\r\n        <Input message={message} setMessage={setMessage} sendMessage={sendMessage}/>\r\n      </div>\r\n      <TextContainer users={users}/>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Chat;\r\n","import React, {useState} from 'react';\r\nimport {Link} from \"react-router-dom\";\r\n\r\nimport \"./Join.css\"\r\nconst Join = () => {\r\n  const [name, setName] = useState(\"\")\r\n  const [room, setRoom] = useState(\"\")\r\n\r\n  return (\r\n    <div className=\"joinOuterContainer\">\r\n      <div className=\"joinInnerContainer\">\r\n        <h1 className=\"heading\">Join</h1>\r\n        <div>\r\n          <input placeholder=\"Name\" className=\"joinInput\" type=\"text\" onChange={(e) => setName(e.target.value)}/>\r\n          </div>\r\n        <div>\r\n          <input placeholder=\"Room\" className=\"joinInput mt-20\" type=\"text\" onChange={(e) => setRoom(e.target.value)}/>\r\n          </div>\r\n        <Link onClick={e => (!name || !room) ? e.preventDefault() : null} to={`/chat?name=${name}&room=${room}`}> \r\n          <button className=\"button mt-20\" type=\"submit\">Sign in </button>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Join;\r\n","import React from 'react';\r\n\r\nimport onlineIcon from '../../icons/onlineIcon.png';\r\nimport closeIcon from '../../icons/closeIcon.png';\r\n\r\nimport './InfoBar.css';\r\n\r\nconst InfoBar = ({ room }) => (\r\n  <div className=\"infoBar\">\r\n    <div className=\"leftInnerContainer\">\r\n      <img className=\"onlineIcon\" src={onlineIcon} alt=\"online icon\" />\r\n      <h3>{room}</h3>\r\n    </div>\r\n    <div className=\"rightInnerContainer\">\r\n      <a href=\"/\"><img src={closeIcon} alt=\"close icon\" /></a>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default InfoBar;","import React from 'react';\r\nimport \"./Input.css\"\r\n\r\nconst Input = ({message, setMessage, sendMessage}) => {\r\n  return (\r\n    <form className=\"form\">\r\n      <input\r\n        className=\"input\"\r\n        type=\"text\"\r\n        placeholder=\"Type a message...\"\r\n        value={message}\r\n        onChange={e => setMessage(e.target.value)}\r\n        onKeyPress={e => e.key === \"Enter\"? sendMessage(e) : null}\r\n      />\r\n\r\n      <button className=\"sendButton\" onClick={(e) => sendMessage(e)}>\r\n        Send\r\n      </button>\r\n    </form>\r\n  );\r\n}\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport \"./Message.css\"\r\n\r\nconst Message = ({message:{user, text}, name}) => {\r\n  //message props có cả user and text \r\n  let isSentByCurrentUser = false\r\n\r\n  const trimmedName = name.trim().toLowerCase()\r\n  \r\n  if(user === trimmedName){\r\n    isSentByCurrentUser = true\r\n  }\r\n  return (\r\n    isSentByCurrentUser \r\n    ? ( //sent by current user\r\n      <div className=\"messageContainer justifyEnd\">\r\n        <p className=\"sentText\">{trimmedName}</p>\r\n        <div className=\"messageBox backgroundBlue\">\r\n          <p className=\"messageText colorWhite\">{text}</p>\r\n        </div>\r\n      </div>\r\n    )\r\n    : ( // not send by current user\r\n      <div className=\"messageContainer justifyStart\">\r\n        <div className=\"messageBox backgroundLight\">\r\n          <p className=\"messageText colorDark\">{text}</p>\r\n        </div>\r\n        <p className=\"sentText pl-10\">{user}</p>\r\n      </div>\r\n    )\r\n  );\r\n}\r\n\r\nexport default Message;\r\n","import React from 'react';\r\n\r\nimport ScrollToBottom from \"react-scroll-to-bottom\"\r\nimport Message from '../Message/Message';\r\nimport \"./Messages.css\"\r\n\r\nconst Messages = ({messages, message, name}) => {\r\n  return (\r\n    <ScrollToBottom className=\"messages\">\r\n      {messages.map((message, i) => <div key={i}>\r\n        <Message message={message} name={name}/>\r\n        {/* cần Message để phân biệt là message từ current user hay từ user cũ  */}\r\n      </div>)}\r\n    </ScrollToBottom>\r\n  );\r\n}\r\n\r\nexport default Messages;\r\n","import React from 'react';\r\n\r\nimport onlineIcon from '../../icons/onlineIcon.png';\r\n\r\nimport './TextContainer.css';\r\n\r\nconst TextContainer = ({ users }) => (\r\n  <div className=\"textContainer\">\r\n    <div>\r\n      <h1>Realtime Chat Application <span role=\"img\" aria-label=\"emoji\">💬</span></h1>\r\n      <h2>Created with React, Express, Node and Socket.IO <span role=\"img\" aria-label=\"emoji\">❤️</span></h2>\r\n      <h2>Try it out right now! <span role=\"img\" aria-label=\"emoji\">⬅️</span></h2>\r\n    </div>\r\n    {\r\n      users\r\n        ? (\r\n          <div>\r\n            <h1>People currently chatting:</h1>\r\n            <div className=\"activeContainer\">\r\n              <h2>\r\n                {users.map(({name}) => (\r\n                  <div key={name} className=\"activeItem\">\r\n                    {name}\r\n                    <img alt=\"Online Icon\" src={onlineIcon}/>\r\n                  </div>\r\n                ))}\r\n              </h2>\r\n            </div>\r\n          </div>\r\n        )\r\n        : null\r\n    }\r\n  </div>\r\n);\r\n\r\nexport default TextContainer;","import React from 'react';\nimport {BrowserRouter as Router, Route} from \"react-router-dom\"\n\nimport Join from \"./components/Join/Join\"\nimport Chat from \"./components/Chat/Chat\"\n\nconst App = () =>{\n  return (\n  <Router>\n    <Route path=\"/\" exact component={Join}/>\n    <Route path=\"/chat\" component={Chat}/>\n  </Router>\n  )\n\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAYAAADgzO9IAAAAAXNSR0IArs4c6QAAAExJREFUCB1jbPh/le3lx5tNDIwMcQwg8J9hkTi/eh0LWJCBoRwoAAPlQDEGJrhKmDCIBupmQuYjs5lAZiILgNlAMRaQRSAz4UZCLQcAIwYaiAejKoYAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAAXNSR0IArs4c6QAAAHBJREFUGBmNkAEKwCAMA2VfGP2mrx3sOV2us6IymIXQGlNTW9zdhCqcZQm4dmelFUp+CZZa6sYpeUVIFyIixMqjCO51Wy5unQExuYSbSF5JASLqPsqRM21lOoWc89tagr3PSMgOiWlwnUeXWA/E78IfuAX270S3ydAAAAAASUVORK5CYII=\""],"sourceRoot":""}